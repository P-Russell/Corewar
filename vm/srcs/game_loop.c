/* ************************************************************************** *//*                                                                            *//*                                                        :::      ::::::::   *//*   game_loop.c                                        :+:      :+:    :+:   *//*                                                    +:+ +:+         +:+     *//*   By: prussell <marvin@42.fr>                    +#+  +:+       +#+        *//*                                                +#+#+#+#+#+   +#+           *//*   Created: 2017/09/20 08:37:24 by prussell          #+#    #+#             *//*   Updated: 2017/09/25 12:38:25 by prussell         ###   ########.fr       *//*                                                                            *//* ************************************************************************** *//*** Check_processes removes processes that have not made a valid call to live op** since last check. Also returns NBR_LIVE if one process have made NBR_LIVE** calls to live op.*/int				check_processes(t_process *process){	t_process	*cur;	t_process	*tmp;	int			ret;	cur = process;	ret = 1;	while (cur && cur->alive_calls == 0)		del_first_proc(&cur);	if (cur && cur->live_calls >= NBR_LIVE)		ret = NBR_LIVE;	while (cur && cur->next)	{		if (cur->next->live_calls >= NBR_LIVE)			ret = NBR_LIVE;		if (cur->next->alive_calls == 0)		{			tmp = cur->next;			cur->next = tmp->next;			free(tmp);		}	}	return (ret);}/*** run_processes returns the playet num of the last process to call live*/static int		run_processes(t_process *proc, int iter){	t_process	*p;	int			player;	player = 0;	while(iter)	{		p = proc;		while(p)		{			player = exec_proc(p);			p = p->next;		}		iter--;	}	return (player);}int				game_loop(t_env *env){	int		c_to_die;	int		i;	int		checks;	int		last_alive;	c_to_die = CYCLE_TO_DIE;	i = 0;	checks = 1;	while (env->process)	{		i += (c_to_die / MAX_CHECKS);		last_alive = run_processes(env->process, c_to_die / MAX_CHECKS);		checks++		if (check_processes(env->process) == NBR_LIVE)			c_to_die -= CYCLE_DELTA;		if (checks == MAX_CHECKS)		{			checks = 1;			i = 0;			c_to_die -= CYCLE_DELTA;		}	}	winner(env->champs, last_alive);}